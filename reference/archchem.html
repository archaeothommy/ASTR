<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>archchem — archchem • ASTR</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="archchem — archchem"><meta name="description" content="A function to create a data format for chemical analysis datasets
in archaeology containing numerical elemental and isotopic data. Loads data
from a file (.csv, .xls, .xlsx) or object (dataframe) in R. The data format
will contain analytical data as well as corresponding contextual information
and metadata (labelled as context)."><meta property="og:description" content="A function to create a data format for chemical analysis datasets
in archaeology containing numerical elemental and isotopic data. Loads data
from a file (.csv, .xls, .xlsx) or object (dataframe) in R. The data format
will contain analytical data as well as corresponding contextual information
and metadata (labelled as context)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ASTR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/VG.ASTRschema.0.0.2.html">ASTR schema</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1><strong>archchem</strong></h1>

      <div class="d-none name"><code>archchem.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A function to create a data format for chemical analysis datasets
in archaeology containing numerical elemental and isotopic data. Loads data
from a file (.csv, .xls, .xlsx) or object (dataframe) in R. The data format
will contain analytical data as well as corresponding contextual information
and metadata (labelled as context).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">as_archchem</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">"ID"</span>,</span>
<span>  context <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  bdl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b.d."</span>, <span class="st">"bd"</span>, <span class="st">"b.d.l."</span>, <span class="st">"bdl"</span>, <span class="st">"&lt;LOD"</span>, <span class="st">"&lt;"</span><span class="op">)</span>,</span>
<span>  bdl_strategy <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="cn">NA_character_</span></span>
<span> <span class="op">}</span>,</span>
<span>  guess_context_type <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"n/a"</span>, <span class="st">"NA"</span>, <span class="st">"N.A."</span>, <span class="st">"N/A"</span>, <span class="st">"na"</span>, <span class="st">"-"</span>, <span class="st">"n.d."</span>, <span class="st">"n.a."</span>, <span class="st">"#DIV/0!"</span>, <span class="st">"#VALUE!"</span>,</span>
<span>    <span class="st">"#REF!"</span>, <span class="st">"#NAME?"</span>, <span class="st">"#NUM!"</span>, <span class="st">"#N/A"</span>, <span class="st">"#NULL!"</span><span class="op">)</span>,</span>
<span>  drop_columns <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  validate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">validate</span><span class="op">(</span><span class="va">x</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">read_archchem</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  id_column <span class="op">=</span> <span class="st">"ID"</span>,</span>
<span>  context <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  delim <span class="op">=</span> <span class="st">","</span>,</span>
<span>  guess_context_type <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"n/a"</span>, <span class="st">"NA"</span>, <span class="st">"N.A."</span>, <span class="st">"N/A"</span>, <span class="st">"na"</span>, <span class="st">"-"</span>, <span class="st">"n.d."</span>, <span class="st">"n.a."</span>, <span class="st">"#DIV/0!"</span>, <span class="st">"#VALUE!"</span>,</span>
<span>    <span class="st">"#REF!"</span>, <span class="st">"#NAME?"</span>, <span class="st">"#NUM!"</span>, <span class="st">"#N/A"</span>, <span class="st">"#NULL!"</span><span class="op">)</span>,</span>
<span>  bdl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b.d."</span>, <span class="st">"bd"</span>, <span class="st">"b.d.l."</span>, <span class="st">"bdl"</span>, <span class="st">"&lt;LOD"</span>, <span class="st">"&lt;"</span><span class="op">)</span>,</span>
<span>  bdl_strategy <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>     <span class="cn">NA_character_</span></span>
<span> <span class="op">}</span>,</span>
<span>  drop_columns <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  validate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'archchem'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'archchem'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remove_units</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_analytical_columns</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_analytical_columns.default</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_contextual_columns</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_contextual_columns.default</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>a data.frame containing the input table</p></dd>


<dt id="arg-id-column">id_column<a class="anchor" aria-label="anchor" href="#arg-id-column"></a></dt>
<dd><p>name of the ID column present in df (or in the file at path).
Defaults to "ID"</p></dd>


<dt id="arg-context">context<a class="anchor" aria-label="anchor" href="#arg-context"></a></dt>
<dd><p>Columns that provide contextual (non-measurement) information;
may be column names, integer positions, or a logical inclusion vector.</p></dd>


<dt id="arg-bdl">bdl<a class="anchor" aria-label="anchor" href="#arg-bdl"></a></dt>
<dd><p>Strings representing “below detection limit” values. By default,
the following are recognized: "b.d.", "bd", "b.d.l.", "bdl", "&lt;LOD", "&lt;".</p></dd>


<dt id="arg-bdl-strategy">bdl_strategy<a class="anchor" aria-label="anchor" href="#arg-bdl-strategy"></a></dt>
<dd><p>Function used to replace BDL strings. Defaults to a
function returning NA.</p></dd>


<dt id="arg-guess-context-type">guess_context_type<a class="anchor" aria-label="anchor" href="#arg-guess-context-type"></a></dt>
<dd><p>If TRUE, attempt to infer appropriate classes for
context columns.</p></dd>


<dt id="arg-na">na<a class="anchor" aria-label="anchor" href="#arg-na"></a></dt>
<dd><p>Character vector of strings to be interpret as missing values.</p></dd>


<dt id="arg-drop-columns">drop_columns<a class="anchor" aria-label="anchor" href="#arg-drop-columns"></a></dt>
<dd><p>...</p></dd>


<dt id="arg-validate">validate<a class="anchor" aria-label="anchor" href="#arg-validate"></a></dt>
<dd><p>...</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to the respective import functions.
See their documentation for details:</p><ul><li><p><code><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">readxl::read_excel()</a></code> for file formats <code>.xlsx</code> or <code>.xls</code></p></li>
<li><p><code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_delim()</a></code> for all other file formats.</p></li>
</ul></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an object of class archchem</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>...</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>path to the file that should be read</p></dd>


<dt id="arg-delim">delim<a class="anchor" aria-label="anchor" href="#arg-delim"></a></dt>
<dd><p>A character string with the separator for tabular data. Must be
provided for all file types except <code>.xlsx</code> or <code>.xls</code>. Default to <code>,</code>. Use
<code>\t</code> for tab-separated data.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a data structure <code>archchem</code>  which is a tibble derived-object</p>
<p>The function prints a short summary about the dataset, including a list of
all context columns and analytical data columns.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The data files can be fairly freeform, i.e. no specified elements,
oxides, or isotopic ratios are required and no exact order of these needs to
be adhered to. Analyses can contain as many analytical columns as necessary.</p>
<p>The column that contains the unique samples identification is specified using
the <code>ID</code> argument. If the dataset contains duplicate ids, the following warning
will return:
Detected multiple data rows with the same ‘ID’. They will be renamed
consecutively using the following convention: <code>_1</code>,<code>_2</code>, ... <code>_n</code></p>
<p>Metadata contained within the dataset must be specified using the <code>context</code>
argument. If any column in the dataframe is not specified as context and not
recognised as an analytical column, this will result in the error:
Column name <colname> could not be parsed. Either analytical columns do not
conform to ASTR conventions or contextual columns are not specified as such.</colname></p>
<p>Below detection limit notation (i.e. ‘b.d.’, ‘bd’, ‘b.d.l.’, ‘bdl’, ‘&lt;LOD’,
or ‘&lt;..’) for element and oxide concentrations is specified using the <code>bdl</code>
argument. One or more notations can be used as is appropriate for the dataset,
and can be notations not included in the list above. The argument
<code>bdl_strategy</code> is used to specify the value for handling detection limits.
This is to facilitate the different handling needs of the detection limit for
future statistical applications, as opposed to automatically assigning such
values as ‘NA’.</p>
<p>Missing values (NA) are allowed anywhere in the data file body, and those
found in an analytical data column will be replaced by <code>NA</code> automatically.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

